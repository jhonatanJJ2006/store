document.addEventListener("DOMContentLoaded",(function(){const e=document.getElementById("enviarMensaje");e&&e.addEventListener("click",(function(){const e=document.getElementById("nombre").value,t=document.getElementById("apellido").value,n=document.getElementById("email").value,o=document.getElementById("mensaje").value;e&&t&&n&&o?fetch("/contacto",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({nombre:e,apellido:t,email:n,mensaje:o})}).then(e=>e.json()).then(e=>{let t="Email Enviado Correctamente",n="success";e.message?(t=e.message,n="success"):Swal.fire({title:t,icon:n,showConfirmButton:!0}).then(e=>{e.isConfirmed&&"success"===n&&(window.location.href="/contacto")})}):Swal.fire({title:"Todos los campos son requeridos",icon:"error"})}))})),function(){const e=document.querySelectorAll(".swiper__boton");e.length>0&&e.forEach(e=>{e.addEventListener("click",()=>{let t=e.getAttribute("data-id"),n=new FormData;n.append("id",t),fetch("/carrito/nuevoProducto",{method:"POST",body:n}).then(e=>{if(!e.ok)throw new Error("Error en la red");return e.json()}).then(e=>{e.exito?Swal.fire({title:"Éxito",text:e.mensaje,icon:"success"}).then(e=>{e.isConfirmed&&window.location.reload()}):(console.log(e.mensaje),Swal.fire("Aviso",e.mensaje,"warning"))}).catch(e=>{console.error("Error:",e),Swal.fire("Error","Hubo un problema al añadir el producto","error")})})})}(),function(){const e=document.querySelectorAll(".carrito__mas"),t=document.querySelectorAll(".carrito__menos"),n=document.querySelectorAll(".carrito__cantidad"),o=document.querySelectorAll(".precio_final"),a=document.querySelector(".pago_total"),r={pais:document.getElementById("pais"),provincia:document.getElementById("provincia"),ciudad:document.getElementById("ciudad"),canton:document.getElementById("canton"),calles:document.getElementById("calles"),casa:document.getElementById("casa"),nombre:document.getElementById("nombre"),apellido:document.getElementById("apellido"),telefono:document.getElementById("telefono")},i=document.querySelector("#paypal-button-container");function c(){let e=0;return o.forEach(t=>{const n=parseFloat(t.textContent.replace("$ ","").replace(",",""))||0;e+=n}),a.textContent="$ "+e.toFixed(2),e}e&&(e.forEach(e=>{e.addEventListener("click",()=>{let t=e.previousElementSibling,a=parseInt(t.textContent)||1,r=e.getAttribute("data-identificador");a++;const i=new FormData;i.append("id",r),i.append("cantidad",a),fetch("/carrito/comprobar",{method:"POST",body:i}).then(e=>e.json()).then(e=>{if(e){let t=e*a;n.forEach(e=>{e.getAttribute("data-identificador")===r&&(e.textContent=a)}),o.forEach(e=>{e.getAttribute("data-identificador")===r&&(e.textContent="$ "+t.toFixed(2))}),c()}else Swal.fire({icon:"warning",title:"Stock agotado",text:"No hay más de este producto en stock",confirmButtonText:"Entendido",confirmButtonColor:"#3085d6",timer:3e3})}).catch(e=>console.error("Hubo un problema con la petición fetch:",e))})}),t.forEach(e=>{e.addEventListener("click",()=>{let t=e.nextElementSibling,a=parseInt(t.textContent)||1;if(a>1){let t=e.getAttribute("data-identificador");a--;const r=new FormData;r.append("id",t),r.append("cantidad",a),fetch("/carrito/comprobar",{method:"POST",body:r}).then(e=>e.json()).then(e=>{if(e){let r=e*a;n.forEach(e=>{e.getAttribute("data-identificador")===t&&(e.textContent=a)}),o.forEach(e=>{e.getAttribute("data-identificador")===t&&(e.textContent="$ "+r.toFixed(2))}),c()}}).catch(e=>console.error("Hubo un problema con la petición fetch:",e))}})}),i&&paypal.Buttons({style:{layout:"vertical",color:"blue",shape:"rect",label:"paypal"},createOrder:function(e,t){if(!function(){for(let e in r)if(""===r[e].value.trim())return Swal.fire({icon:"warning",title:"Campo vacío",text:`El campo "${e}" está vacío. Por favor, rellénalo.`,confirmButtonText:"Entendido",confirmButtonColor:"#d33"}),!1;return!0}())return;const n=c();return t.order.create({purchase_units:[{amount:{value:n.toFixed(2)}}]})},onApprove:function(e,t){return t.order.capture().then((function(e){let t=[];n.forEach(e=>{let n=e.getAttribute("data-identificador"),o=parseInt(e.textContent)||1;t.push({id:n,cantidad:o})});const o=new FormData;return o.append("orderID",e.id),o.append("payerID",e.payer.payer_id),o.append("productos",JSON.stringify(t)),o.append("pais",r.pais.value),o.append("provincia",r.provincia.value),o.append("ciudad",r.ciudad.value),o.append("canton",r.canton.value),o.append("calles",r.calles.value),o.append("casa",r.casa.value),o.append("nombre",r.nombre.value),o.append("apellido",r.apellido.value),o.append("telefono",r.telefono.value),fetch("/carrito/pagoExitoso",{method:"POST",body:o}).then(e=>e.json()).then(t=>{Swal.fire({icon:"success",title:"Compra realizada",text:`Gracias por tu compra, ${e.payer.name.given_name}. El tiempo estimado de envío es de hasta 2 semanas.`,confirmButtonText:"OK",confirmButtonColor:"#3085d6",preConfirm:()=>{window.location.href="/"}})}).catch(e=>{console.error("Error en la confirmación del pago:",e),Swal.fire({icon:"error",title:"Error en el pago",text:"Hubo un problema procesando tu pago. Intenta nuevamente.",confirmButtonText:"Entendido",confirmButtonColor:"#d33"})})}))}}).render("#paypal-button-container"))}(),function(){const e=document.querySelectorAll(".compra-eliminar");e&&e.forEach(e=>{e.addEventListener("click",(function(){Swal.fire({title:"¿Está seguro de eliminar el registro?",showCancelButton:!0,confirmButtonText:"Sí",cancelButtonText:"Cancelar"}).then(t=>{if(t.isConfirmed){const t=new FormData;t.append("id",e.dataset.usuarioId),t.append("fecha",e.dataset.envioFecha),fetch("/admin/compras/eliminar",{method:"POST",body:t}).then(e=>e.json()).then(e=>{e&&(window.location.href="/admin/compras")})}})}))})}(),function(){const e=document.getElementById("barraPorcentaje");if(e){const t=document.getElementById("porcentajeSeleccionado"),n=document.getElementById("precioFinal"),o=document.getElementById("precioActual"),a=parseFloat(o.innerText.replace("$",""));e.addEventListener("input",()=>{const o=e.value,r=a-a*(o/100);t.textContent=o+"%",n.value=r.toFixed(2),porcentajeDescuento.value=o})}}(),document.addEventListener("DOMContentLoaded",()=>{const e=document.getElementById("dropzone"),t=document.getElementById("imagen"),n=document.getElementById("formulario-administrador"),o=document.getElementById("preview");if(e){function a(t){const n=new FileReader;n.onload=function(t){o.src=t.target.result,o.style.display="block",e.classList.add("has-image")},n.readAsDataURL(t)}e.addEventListener("click",()=>{t.click()}),e.addEventListener("dragover",t=>{t.preventDefault(),e.classList.add("dragging")}),e.addEventListener("dragleave",()=>{e.classList.remove("dragging")}),e.addEventListener("drop",n=>{n.preventDefault(),e.classList.remove("dragging");const o=n.dataTransfer.files;o.length>0&&(t.files=o,a(o[0]))}),t.addEventListener("change",e=>{const t=e.target.files[0];t&&a(t)}),n.addEventListener("submit",e=>{e.preventDefault();const n=new FormData,o=t.files[0];o?(n.append("imagen",o),fetch("/admin/imagenes/nuevo",{method:"POST",body:n}).then(e=>e.text()).then(e=>{Swal.fire({title:"Éxito",text:"Imagen subida exitosamente",icon:"success",confirmButtonText:"OK"}).then(()=>{window.location.href="/admin/imagenes"})}).catch(e=>{alert("Error al subir la imagen"),console.error(e)})):alert("No has seleccionado ninguna imagen")})}}),function(){const e=document.querySelector("#menu"),t=document.querySelector(".barra__movil"),n=document.querySelector(".barra__movil--x"),o=document.querySelector(".barra__opacidad");if(e){function a(){document.body.classList.toggle("no-scroll")}e.addEventListener("click",(function(){t.classList.toggle("barra__activo"),a()})),n.addEventListener("click",(function(){t.classList.remove("barra__activo"),a()})),o.addEventListener("click",(function(){t.classList.remove("barra__activo"),a()}))}}(),function(){const e=document.querySelector(".slides-of"),t=document.querySelectorAll(".slide-of");let n=0;if(e){setInterval((function(){n++,n>=t.length&&(n=0),function(){const t=100*-n;e.style.transform=`translateX(${t}%)`}()}),2e3)}}(),document.addEventListener("DOMContentLoaded",(function(){if(document.querySelector(".mySwiper"))new Swiper(".mySwiper",{slidesPerView:1,spaceBetween:30,loop:!0,autoplay:{delay:2500,disableOnInteraction:!1},pagination:{el:".swiper-pagination",clickable:!0},navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"}})}));
//# sourceMappingURL=bundle.js.map
